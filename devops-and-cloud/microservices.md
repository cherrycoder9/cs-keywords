# 마이크로서비스 (Microservices)

마이크로서비스는 대규모 애플리케이션을 작고 독립적인 서비스로 분리하여 개발, 배포, 확장하는 소프트웨어 아키텍처 패턴. 각 서비스는 독립적으로 관리되며, 낮은 결합도로 유지보수성과 확장성을 높임.

## 주요 특징

- **독립 배포**: 각 서비스의 개별 배포 및 업데이트 가능
- **작은 규모**: 단일 기능 수행에 집중된 작은 서비스 단위
- **자율적 팀**: 서비스별 독립 팀 운영으로 팀 간 의존성 감소
- **다양한 기술**: 서비스별 최적 기술 스택 선택 가능
- **경량 통신**: HTTP/REST, gRPC 등 경량 프로토콜 사용

## 핵심 구성 요소

- **서비스**: 독립 배포 가능한 소프트웨어 모듈
- **API 게이트웨이**: 요청 라우팅, 인증, 로드 밸런싱 처리
- **서비스 레지스트리**: 서비스 위치 및 상태 관리, 디스커버리 지원
- **컨테이너**: 서비스 격리 실행을 위한 경량 가상화 기술
- **오케스트레이션**: 컨테이너 배포 및 관리 자동화 (예: Kubernetes)

## 구현 예시

### 사용자 서비스

```python
from flask import Flask, jsonify
app = Flask(__name__)

users = {1: {"name": "Alice"}, 2: {"name": "Bob"}}

@app.route("/users/<int:user_id>", methods=["GET"])
def get_user(user_id):
    user = users.get(user_id)
    return jsonify(user) if user else (jsonify({"error": "User not found"}), 404)

if __name__ == "__main__":
    app.run(port=5001)
```

### 주문 서비스

```python
from flask import Flask, jsonify
app = Flask(__name__)

orders = {1: {"item": "Book", "quantity": 2}, 2: {"item": "Pen", "quantity": 5}}

@app.route("/orders/<int:order_id>", methods=["GET"])
def get_order(order_id):
    order = orders.get(order_id)
    return jsonify(order) if order else (jsonify({"error": "Order not found"}), 404)

if __name__ == "__main__":
    app.run(port=5002)
```

## 장점

- **높은 확장성**: 필요 서비스만 독립적 확장 가능
- **유지보수 용이**: 작은 코드 베이스로 이해 및 관리 쉬움
- **유연한 배포**: 서비스별 독립 배포로 빠른 릴리즈 가능
- **강화된 탄력성**: 서비스 간 격리로 장애 영향 최소화
- **기술 다양성**: 서비스에 최적화된 기술 선택 가능

## 단점

- **복잡한 분산 시스템**: 모니터링 및 디버깅 난이도 증가
- **데이터 일관성 문제**: 서비스별 독립 데이터 저장소로 일관성 유지 어려움
- **네트워크 오버헤드**: 빈번한 서비스 간 통신으로 오버헤드 발생 가능
- **복잡한 배포/관리**: 다수 서비스의 자동화된 배포 및 관리에 많은 노력 필요

## 활용 사례

- **대규모 웹 애플리케이션**: 기능별 독립 서비스로 확장성 및 유지보수성 향상
- **전자상거래 플랫폼**: 사용자, 상품, 주문 관리 등을 개별 서비스로 분리 운영
- **금융 시스템**: 거래, 결제, 인증 등을 독립 서비스로 구현하여 보안 및 확장성 강화
- **스트리밍 서비스**: 동영상 스트리밍, 추천, 광고 관리 등을 개별 서비스로 분리 관리

마이크로서비스는 대규모 애플리케이션의 효율적 개발 및 운영을 위한 강력한 아키텍처 패턴. 확장성과 유지보수성을 높이고 다양한 기술 적용을 가능케 함. 그러나 복잡한 분산 시스템 관리에 따른 부담이 있으므로 신중한 설계와 관리가 필수적.
