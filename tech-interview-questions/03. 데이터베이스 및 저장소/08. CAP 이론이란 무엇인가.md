# CAP 이론

CAP 이론은 분산 컴퓨팅 시스템의 세 가지 핵심 특성을 설명하는 개념입니다. 2000년 Eric Brewer가 제안한 이 이론은 분산 시스템 설계 시 필연적인 트레이드오프를 이해하는 데 중요한 역할을 합니다.

## 세 가지 핵심 특성

### 일관성 (Consistency)

모든 노드에서 동일 시점에 동일한 데이터를 볼 수 있도록 보장합니다. 데이터 갱신 후 모든 읽기 요청은 최신 데이터를 반환해야 합니다.

### 가용성 (Availability)

분산 시스템의 모든 요청이 항상 응답을 받을 수 있도록 보장합니다. 일부 노드에 장애가 발생해도 시스템은 계속 응답을 제공해야 합니다.

### 네트워크 분할 허용 (Partition Tolerance)

네트워크 분할 상황에서도 시스템이 계속 동작할 수 있도록 보장합니다. 일부 노드 간 통신이 불가능해도 시스템은 작동해야 합니다.

## CAP 원리

CAP 이론의 핵심은 분산 시스템이 위 세 가지 특성 중 두 가지만을 동시에 보장할 수 있다는 것입니다. 이에 따라 다음과 같은 세 가지 조합이 가능합니다:

### CP 시스템 (일관성 + 분할 허용)

- 일관성과 네트워크 분할 허용을 보장
- 네트워크 분할 시 가용성 포기
- 예: HBase, MongoDB

### AP 시스템 (가용성 + 분할 허용)

- 가용성과 네트워크 분할 허용을 보장
- 네트워크 분할 시 일관성 포기
- 예: Couchbase, DynamoDB

### CA 시스템 (일관성 + 가용성)

- 이론상으로만 가능한 조합
- 실제로는 네트워크 분할이 불가피하므로 구현 불가능

## 실제 적용

CAP 이론은 분산 시스템 설계 시 중요한 트레이드오프를 이해하는 데 도움을 줍니다. 각 특성의 중요도에 따라 시스템 설계를 결정할 수 있습니다.

### CP 시스템 예시 (HBase)

일관성과 네트워크 분할 허용을 중시합니다. 네트워크 분할 발생 시 일부 요청은 일관성 유지를 위해 지연되거나 실패할 수 있습니다.

### AP 시스템 예시 (DynamoDB)

가용성과 네트워크 분할 허용을 중시합니다. 네트워크 분할 발생 시 가용성 유지를 위해 일부 데이터의 일관성을 포기할 수 있습니다.

CAP 이론은 분산 시스템의 주요 특성 간 트레이드오프를 명확히 설명합니다. 시스템 설계 시 각 특성의 중요도를 고려해 적절한 균형점을 찾는 것이 중요합니다. 실제 상황에서는 세 가지 특성을 완벽히 양자택일하기보다는 각 특성의 정도를 조절해 최적의 솔루션을 찾는 것이 일반적입니다.
