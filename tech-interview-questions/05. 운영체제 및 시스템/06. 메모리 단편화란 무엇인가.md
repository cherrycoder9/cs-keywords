# 메모리 단편화란 무엇인가

메모리 단편화는 컴퓨터 시스템에서 메모리가 작은 조각으로 나뉘어 사용 가능하지만, 필요한 큰 연속 공간을 할당할 수 없는 상태를 의미함. 크게 내부 단편화와 외부 단편화로 구분됨.

## 내부 단편화 (Internal Fragmentation)

- 할당된 메모리 블록 내에서 실제 사용되지 않는 여유 공간 발생
- 고정 크기 메모리 블록 할당 시 요청보다 큰 블록이 할당되면 발생
- 예: 128바이트 요청에 256바이트 블록 할당 시 128바이트 낭비

## 외부 단편화 (External Fragmentation)

- 메모리 할당/해제 반복으로 작은 조각들로 분할되어 큰 연속 블록 할당 불가 상태
- 예시:

  ```text
  [빈 공간: 10KB][사용 중: 20KB][빈 공간: 15KB][사용 중: 25KB][빈 공간: 5KB]
  ```

  30KB 요청 시 연속된 공간 부족으로 할당 불가

## 방지 및 해결 방법

1. 메모리 압축: 사용 중인 블록 모아 연속 빈 공간 확보
2. 할당 알고리즘 개선:
   - 베스트 핏: 요청된 크기와 가장 근접한 빈 블록을 찾아 할당
   - 퍼스트 핏: 요청된 크기보다 큰 첫 번째 빈 블록을 찾아 할당
   - 넥스트 핏: 마지막으로 검색한 위치부터 시작하여 퍼스트 핏과 유사하게 동작
3. 슬랩 할당: 고정 크기 분할로 내부 단편화 감소
4. 메모리 풀: 동일 크기 객체용 미리 할당된 풀 사용
5. 가비지 컬렉션: 미사용 객체 해제 및 메모리 압축
6. 페이징과 세그먼테이션:
   - 페이징: 고정 크기의 페이지로 메모리를 관리, 외부 단편화 감소
   - 세그먼테이션: 가변 크기의 세그먼트로 메모리를 관리, 논리적 분할에 유용

## 예시 시나리오

내부 단편화:

```text
요청: 100바이트
할당: 128바이트
단편화: 28바이트
```

외부 단편화:

```text
전체: 1000바이트
사용: [100][50][200]
빈 공간: [150][250][50]
요청: 300바이트 (할당 실패)
```

## 메모리 단편화가 시스템 성능에 미치는 영향

1. 메모리 사용 효율성 저하: 사용 가능한 총 메모리 양 감소
2. 메모리 할당 및 해제 시간 증가: 적절한 공간 찾기에 더 많은 시간 소요
3. 캐시 효율성 감소: 분산된 메모리 접근으로 캐시 미스 증가
4. 시스템 안정성 저하: 대규모 메모리 요청 시 할당 실패 가능성 증가

메모리 단편화는 시스템 성능과 안정성에 중대한 영향을 미치는 문제임. 다양한 관리 기법으로 이를 최소화하고 효율적인 메모리 사용을 도모해야 함. 운영체제와 애플리케이션 개발자 모두 메모리 단편화를 고려한 설계와 구현이 필요함.
